var typingTimer,ajaxRequest;function isEmail(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function isPhoneNumberVN(e){var t=!1,n=e.trim();if(""!=(n=(n=(n=(n=n.replace("(+84)","0")).replace("+84","0")).replace("0084","0")).replace(/ /g,""))){var i=n.substring(0,2);("09"==i||"08"==i||"07"==i||"05"==i||"03"==i)&&10==n.length?n.match(/^\d{10}/)&&(t=!0):"02"==i&&11==n.length&&n.match(/^\d{11}/)&&(t=!0)}return t}function visible_cart_respon(){$(".dropdown_cart").css("opacity",1),$(".dropdown_cart").css("visibility","visible"),$(".black-res-screen").css("display","block"),$(".fix1screen").css("display","block")}$(document).ready(function(){$(".ol1").click(function(){$(this).addClass("activebtn"),$(".ol2").removeClass("activebtn"),$("#body-nbox").removeClass("product-horizontal")}),$(".ol2").click(function(){$(this).addClass("activebtn"),$("#body-nbox").addClass("product-horizontal"),$(".ol1").removeClass("activebtn")}),$(".btn-closenk").click(function(){$(".form-login").css("display","none"),$(".form-search-product").css("display","none"),$(".black-screen").css("display","none"),$("#container").removeClass("fixed-hbd"),$("#fixscreen-respon").css("display","none")}),$(".btn-login").click(function(){$(".form-login").css("display","block"),$(".black-screen").css("display","block"),$(".wp-content-login").css("display","block"),$(".wp-content-register").css("display","none"),$(".wp-content-forgetpw").css("display","none"),$(".titlek").removeClass("active-formkn"),$(".titlen").addClass("active-formkn"),$("#container").addClass("fixed-hbd"),$("body,html").stop().animate({scrollTop:0},0)}),$(".btn-login-res").click(function(){$("#head-body-respon").removeClass("slider"),$(".form-login").css("display","block"),$(".titlek").removeClass("active-formkn"),$(".titlen").addClass("active-formkn"),$("#container").addClass("fixed-hbd"),$(".wp-content-login").css("display","block"),$(".wp-content-register").css("display","none"),$(".wp-content-forgetpw").css("display","none"),$(".titlek").removeClass("active-formkn"),$(".black-screen").css("display","block"),$("#container").addClass("fixed-hbd"),$("#fixscreen-respon").css("display","none")}),$(".btn-register").click(function(){$(".form-login").css("display","block"),$(".black-screen").css("display","block"),$(".wp-content-login").css("display","none"),$(".wp-content-register").css("display","block"),$(".wp-content-forgetpw").css("display","none"),$(".titlen").removeClass("active-formkn"),$(".titlek").addClass("active-formkn"),$("#container").addClass("fixed-hbd")}),$(".btn-register-res").click(function(){$("#head-body-respon").removeClass("slider"),$(".form-login").css("display","block"),$(".wp-content-login").css("display","none"),$(".wp-content-register").css("display","block"),$(".wp-content-forgetpw").css("display","none"),$(".titlen").removeClass("active-formkn"),$(".titlek").addClass("active-formkn"),$(".black-screen").css("display","block"),$("#container").addClass("fixed-hbd"),$("#fixscreen-respon").css("display","none")}),$(".qpassword").click(function(){$(".form-login").css("display","block"),$(".black-screen").css("display","block"),$(".wp-content-forgetpw").css("display","block"),$(".wp-content-login").css("display","none"),$(".wp-content-register").css("display","none"),$("#container").addClass("fixed-hbd")}),$(".password .imgm").click(function(){$(this).toggleClass("open"),$(this).hasClass("open")?$(".password input").attr("type","text"):$(".password input").attr("type","password")}),$("#check-rules").click(function(){!0==$(this).prop("checked")?$("#dang-ky #btn-register").prop("disabled",!1):!1==$(this).prop("checked")&&$("#dang-ky #btn-register").prop("disabled",!0)}),$(".plus1, .minus1").on("click",function(e){let t=$(e.target).closest(".minus1").is(".minus1"),n=$(e.target).closest(".input-number").find("input");n.is("input")&&n[0][t?"stepDown":"stepUp"]()}),$(".order-noislogin").on("click",function(){alert("Vui l\xf2ng đăng nhập để mua h\xe0ng !")}),$(".iconmnrhv").click(function(){$(this).parents(".parentsmenu").children(".submenu1res").toggleClass("display-vis"),$(this).toggleClass("arrow-rotate")}),$("#btnmenu-resp").click(function(){$("#fixscreen-respon").css("display","block"),$("#head-body-respon").addClass("slider")}),$(".vissubmenu").click(function(){$(this).parents(".catparentc").children(".submenua1").toggleClass("display-vis"),$(this).toggleClass("arrow-rotate")});let e=document.getElementById("head-body-respon"),t=document.getElementById("fixscreen-respon"),n=document.getElementById("closem");n.addEventListener("click",()=>{$("#head-body-respon").removeClass("slider"),$("#fixscreen-respon").css("display","none")}),t.addEventListener("click",t=>{e.contains(t.target)||(n.click(),$(".form-login").css("display","none"))}),$(".catc1").hover(function(){var e=$(this);e.data("timeout",setTimeout(function(){$(".black-content").css("display","block"),$(".lc-mask-search").css({opacity:0,visibility:"hidden"}),$(".ls-history").css("display","none"),e.find(".content-submenu").css("display","block")},100))},function(){var e=$(this);clearTimeout(e.data("timeout")),$(".black-content").css("display","none"),e.find(".content-submenu").css("display","none")}),$(".icon_cart").hover(function(){$("#dropdown").addClass("opacity1_cartmini")},function(){$("#dropdown").removeClass("opacity1_cartmini")}),$("#reqexport").on("click",function(){!0==$(this).prop("checked")?$(".hidden_noreqes").css("display","block"):!1==$(this).prop("checked")&&$(".hidden_noreqes").css("display","none"),$('input[type="radio"][name="dcshop"]:checked').val()}),$(".identity").on("click",function(){"C\xf4ng ty"==(identity=$('input[type="radio"][name="identity"]:checked').val())?($(".company").css("display","block"),$(".person").css("display","none")):($(".company").css("display","none"),$(".person").css("display","block"))}),$(".local-re").on("click",function(){"Giao h\xe0ng tận nơi"==(local_re=$('input[type="radio"][name="local-re"]:checked').val())?($(".de-home").css("display","block"),$(".de-store").css("display","none")):($(".de-home").css("display","none"),$(".de-store").css("display","block"))})}),jQuery.validator.addMethod("checkPhone",function(){var e=!1,t=$(".phonecart1").val().trim();if(""!=(t=(t=(t=(t=t.replace("(+84)","0")).replace("+84","0")).replace("0084","0")).replace(/ /g,""))){var n=t.substring(0,2);("09"==n||"08"==n||"03"==n||"07"==n)&&10==t.length?t.match(/^\d{10}/)&&(e=!0):"01"==n&&11==t.length&&t.match(/^\d{11}/)&&(e=!0)}return e}),jQuery.validator.addMethod("checkPhone1",function(){var e=!1,t=$(".phonecart2").val().trim();if(""!=(t=(t=(t=(t=t.replace("(+84)","0")).replace("+84","0")).replace("0084","0")).replace(/ /g,""))){var n=t.substring(0,2);("09"==n||"08"==n||"03"==n||"07"==n)&&10==t.length?t.match(/^\d{10}/)&&(e=!0):"01"==n&&11==t.length&&t.match(/^\d{11}/)&&(e=!0)}return e}),jQuery.validator.addMethod("checkPhone2",function(){var e=!1,t=$(".phonecart3").val().trim();if(""!=(t=(t=(t=(t=t.replace("(+84)","0")).replace("+84","0")).replace("0084","0")).replace(/ /g,""))){var n=t.substring(0,2);("09"==n||"08"==n||"03"==n||"07"==n)&&10==t.length?t.match(/^\d{10}/)&&(e=!0):"01"==n&&11==t.length&&t.match(/^\d{11}/)&&(e=!0)}return e}),jQuery.validator.addMethod("checknamecompany",function(){var e=!0,t=$("#namecompany").val().trim();return local_re=$('input[type="radio"][name="identity"]:checked').val(),e=!document.getElementById("reqexport").checked||"C\xf4ng ty"!=local_re||t.length>0}),jQuery.validator.addMethod("checkname1",function(){var e=!0,t=$("#name1").val().trim();return local_re=$('input[type="radio"][name="identity"]:checked').val(),e=!document.getElementById("reqexport").checked||"C\xe1 nh\xe2n"!=local_re||t.length>0}),jQuery.validator.addMethod("checkphone1",function(){var e=!0,t=$("#phone1").val().trim();return local_re=$('input[type="radio"][name="identity"]:checked').val(),e=!document.getElementById("reqexport").checked||"C\xe1 nh\xe2n"!=local_re||t.length>0}),jQuery.validator.addMethod("checkaddress1",function(){var e=!0,t=$("#address1").val().trim();return local_re=$('input[type="radio"][name="identity"]:checked').val(),e=!document.getElementById("reqexport").checked||"C\xe1 nh\xe2n"!=local_re||t.length>0}),jQuery.validator.addMethod("checkname2",function(){var e=!0,t=$("#name2").val().trim();return"Giao h\xe0ng tận nơi"!=(local_re=$('input[type="radio"][name="local-re"]:checked').val())||t.length>0}),jQuery.validator.addMethod("checkphone2",function(){var e=!0,t=$("#phone2").val().trim();return"Giao h\xe0ng tận nơi"!=(local_re=$('input[type="radio"][name="local-re"]:checked').val())||t.length>0}),jQuery.validator.addMethod("checkcity2",function(){var e=!0,t=$("#city").find(":selected").val();return"Giao h\xe0ng tận nơi"!=(local_re=$('input[type="radio"][name="local-re"]:checked').val())||t.length>0}),jQuery.validator.addMethod("checkdistrict2",function(){var e=!0,t=$("#district2").find(":selected").val();return"Giao h\xe0ng tận nơi"!=(local_re=$('input[type="radio"][name="local-re"]:checked').val())||t.length>0}),jQuery.validator.addMethod("checkwards2",function(){var e=!0,t=$("#wards2").find(":selected").val();return"Giao h\xe0ng tận nơi"!=(local_re=$('input[type="radio"][name="local-re"]:checked').val())||t.length>0}),jQuery.validator.addMethod("checkaddressdetail2",function(){var e=!0,t=$("#addressdetail2").val().trim();return"Giao h\xe0ng tận nơi"!=(local_re=$('input[type="radio"][name="local-re"]:checked').val())||t.length>0}),jQuery.validator.addMethod("checkcity3",function(){var e=!0,t=$("#city3").val().trim();return"Nhận tại nh\xe0 thuốc"!=(local_re=$('input[type="radio"][name="local-re"]:checked').val())||t.length>0}),jQuery.validator.addMethod("checkdistrict3",function(){var e=!0,t=$("#district3").val().trim();return"Nhận tại nh\xe0 thuốc"!=(local_re=$('input[type="radio"][name="local-re"]:checked').val())||t.length>0}),jQuery.validator.addMethod("checkdcshop",function(){var e=!0,t="",t=$('input[type="radio"][name="dcshop"]:checked').val();return"Nhận tại nh\xe0 thuốc"!=(local_re=$('input[type="radio"][name="local-re"]:checked').val())||void 0!=t}),jQuery.validator.addMethod("checknumbershop",function(){var e=!0,t=$(".count-store").val().trim();return"Nhận tại nh\xe0 thuốc"!=(local_re=$('input[type="radio"][name="local-re"]:checked').val())||t>0}),jQuery.validator.addMethod("isProductSelect",function(){var e=!1;return(numProductSelect=$(".ls-product-select-prescrip li").length)>0&&(e=!0),e}),$.validator.methods.checkEmail=function(e,t,n){return""==e.trim()||isEmail(e.trim())},$.validator.methods.checkPhone=function(e,t,n){return isPhoneNumberVN(e.trim())},$.validator.methods.checkPhoneOrEmail=function(e,t,n){return isEmail(e.trim())||isPhoneNumberVN(e.trim())},$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).ready(function(){function e(){$(".rotate-effect").css("visibility","visible").addClass("animate__animated animate__rotateIn"),$(".overlay").show()}function t(){$(".rotate-effect").removeClass("animate__animated animate__rotateIn").css("visibility","hidden"),$(".overlay").hide()}$(".cat1name").hover(function(){var e=$(this).attr("data-id"),t=$('input[name="_token"]').val(),n=$(this).attr("data-href");$.ajax({url:n,cache:!1,method:"GET",dataType:"html",data:{idCatLevel1:e,_token:t},success:function(e){$(".list_cat_level3_products").html(e),$(".sub-menu1>li").removeClass("active-menucat2"),$(".sub-menu1>li:first-child").addClass("active-menucat2")}})},function(){}),$(".sub-menu1>li").hover(function(){$(".sub-menu1>li").removeClass("active-menucat2"),$(this).addClass("active-menucat2");var e=$(this).attr("data-id"),t=$('input[name="_token"]').val(),n=$(this).attr("data-href");$.ajax({url:n,cache:!1,method:"GET",dataType:"html",data:{idCatLevel2:e,_token:t},success:function(e){$(".list_cat_level3_products").html(e)}})},function(){}),$(".user-register").validate({rules:{fullname:"required",email:{required:!0,checkPhoneOrEmail:!0},password:{required:!0,minlength:6}},messages:{fullname:"Bạn chưa nhập Họ t\xean",email:{required:"Nhập số điện thoại hoặc email",checkPhoneOrEmail:"Số điện thoại / Email kh\xf4ng đ\xfang định dạng"},password:{required:"Bạn cần nhập mật khẩu",minlength:"Mật khẩu tối thiểu 6 k\xfd tự"}},errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".input-group").addClass("has-error"),"checkbox"===t.prop("type")?e.insertAfter(t.next("label")):e.insertAfter(t.closest(".input-group"))},highlight:function(e,t,n){$(e).addClass("is-invalid").removeClass("is-valid")},unhighlight:function(e,t,n){$(e).addClass("is-valid").removeClass("is-invalid"),$(e).closest(".input-group").removeClass("has-error")},submitHandler:function(n){e(),$.ajax({url:n.action,method:n.method,data:$(n).serialize(),success:function(e){e.success?($(".loading-text").text("Đang đăng k\xfd..."),alert("Đăng k\xfd th\xe0nh c\xf4ng!"),window.location.replace(window.location.pathname)):(t(),alert("Kiểm tra lại th\xf4ng tin đ\xe3 tồn tại, vui l\xf2ng thử lại"))}})}}),$(".user-login").validate({rules:{email:{required:!0,checkPhoneOrEmail:!0},password:{required:!0,minlength:6}},messages:{email:{required:"Nhập số điện thoại hoặc email",checkPhoneOrEmail:"Số điện thoại / Email kh\xf4ng đ\xfang định dạng"},password:{required:"Bạn cần nhập mật khẩu",minlength:"Mật khẩu tối thiểu 6 k\xfd tự"}},errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".input-group").addClass("has-error"),"checkbox"===t.prop("type")?e.insertAfter(t.next("label")):e.insertAfter(t.closest(".input-group"))},highlight:function(e,t,n){$(e).addClass("is-invalid").removeClass("is-valid")},unhighlight:function(e,t,n){$(e).addClass("is-valid").removeClass("is-invalid"),$(e).closest(".input-group").removeClass("has-error")},submitHandler:function(n){e(),$.ajax({url:n.action,method:n.method,data:$(n).serialize(),success:function(e){e.success?($(".loading-text").text("Đang đăng nhập..."),location.reload()):e.errors&&e.errors.authentication&&(t(),alert(e.errors.authentication))},error:function(e){t()}})}}),$(".order-complete").validate({ignore:".ignore",rules:{"buyer[fullname]":{required:!0},"buyer[phone]":{required:!0,checkPhone:!0},"receive[fullname]":{required:!0},"receive[phone]":{required:!0,checkPhone:!0},"receive[province_id]":{},"receive[district_id]":{},"receive[ward_id]":{},"receive[address]":{required:!0}},messages:{"buyer[fullname]":{required:"Th\xf4ng tin bắt buộc"},"buyer[phone]":{required:"Th\xf4ng tin bắt buộc",checkPhone:"Số điện thoại kh\xf4ng đ\xfang định dạng"},"buyer[email]":{checkEmail:"Email kh\xf4ng đ\xfang định dạng"},"invoice[name]":{required:"Th\xf4ng tin bắt buộc"},"invoice[phone]":{required:"Th\xf4ng tin bắt buộc",checkPhone:"Số điện thoại kh\xf4ng đ\xfang định dạng"},"invoice[tax_code]":{required:"Th\xf4ng tin bắt buộc"},"invoice[address]":{required:"Th\xf4ng tin bắt buộc"},warehouse_id:{required:"Th\xf4ng tin bắt buộc"},"receive[fullname]":{required:"Th\xf4ng tin bắt buộc"},"receive[phone]":{required:"Th\xf4ng tin bắt buộc",checkPhone:"Số điện thoại kh\xf4ng đ\xfang định dạng"},"receive[province_id]":{required:"Th\xf4ng tin bắt buộc"},"receive[district_id]":{required:"Th\xf4ng tin bắt buộc"},"receive[ward_id]":{required:"Th\xf4ng tin bắt buộc"},"receive[address]":{required:"Th\xf4ng tin bắt buộc"}},errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".wp-input").addClass("has-error"),e.insertAfter(t.closest(".wp-input"))},highlight:function(e,t,n){$(e).addClass("is-invalid").removeClass("is-valid")},unhighlight:function(e,t,n){$(e).addClass("is-valid").removeClass("is-invalid"),$(e).closest(".wp-input").removeClass("has-error")},submitHandler:function(n){$(".loading-text").text("Đang đặt h\xe0ng..."),e(),$.ajax({url:n.action,method:n.method,data:$(n).serialize(),success:function(e){!1===e.fail?window.location.href=e.redirect_url:(t(),alert("Kiểm tra lại th\xf4ng tin, vui l\xf2ng thử lại"))},error:function(e){t()}})}}),$(".form-main-prescrip").validate({ignore:".ignore",rules:{"buyer[fullname]":{required:!0},"buyer[phone]":{required:!0,checkPhone:!0},number_product:{isProductSelect:!0},province_id:{required:!0},district_id:{required:!0},ward_id:{required:!0},address:{required:!0}},messages:{"buyer[fullname]":"Th\xf4ng tin bắt buộc","buyer[phone]":{required:"Th\xf4ng tin bắt buộc",checkPhone:"Số điện thoại kh\xf4ng đ\xfang định dạng"},number_product:{isProductSelect:"Vui l\xf2ng chọn th\xeam thuốc"},province_id:{required:"Th\xf4ng tin bắt buộc"},district_id:{required:"Th\xf4ng tin bắt buộc"},ward_id:{required:"Th\xf4ng tin bắt buộc"},address:{required:"Th\xf4ng tin bắt buộc"}},errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".wp-input").addClass("has-error"),e.insertAfter(t.closest(".wp-input"))},highlight:function(e,t,n){$(e).addClass("is-invalid").removeClass("is-valid")},unhighlight:function(e,t,n){$(e).addClass("is-valid").removeClass("is-invalid"),$(e).closest(".wp-input").removeClass("has-error")}}),$(".form-search-phone-order").validate({ignore:".ignore",rules:{phone:{required:!0,checkPhone:!0}},messages:{phone:{required:"Nhập số điện thoại",checkPhone:"Số điện thoại kh\xf4ng đ\xfang định dạng"}},errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".input-group").addClass("has-error"),"checkbox"===t.prop("type")?e.insertAfter(t.next("label")):e.insertAfter(t.closest(".input-group"))},highlight:function(e,t,n){$(e).addClass("is-invalid").removeClass("is-valid")},unhighlight:function(e,t,n){$(e).addClass("is-valid").removeClass("is-invalid"),$(e).closest(".input-group").removeClass("has-error")}})}),$(document).on("submit","#main-form",function(e){e.preventDefault(),url=$(this).attr("action"),method=$(this).attr("method"),data=new FormData($(this)[0]),$.ajax({type:method,url:url,data:data,cache:!1,contentType:!1,processData:!1,success:function(e){if(!1==e.success){if(null!=e.error)for(control in e.errors)eleError="<label id='"+control+"-error' class='error invalid-feedback' for='"+control+"' style='display:inline-block'>"+e.errors[control]+"</label>",$("[name="+control+"]").closest(".form-group").find("label[for='"+control+"']").remove(),$("[name="+control+"]").closest(".input-group").addClass("has-error").after(eleError),$("[name="+control+"]").addClass("is-invalid").removeClass("is-valid");else alert(e.message)}else alert(e.message),window.location.replace(e.redirect_url)},error:function(e,t,n){alert("Error: "+n)}})}),$(document).on("click",".changeTypePassword",function(e){(parent=$(this).parents(".form-group")).toggleClass("open"),parent.hasClass("open")?(parent.find("input[name='password']").attr("type","text"),$(this).html("<i class='fa fa-eye-slash'></i>")):(parent.find("input[name='password']").attr("type","password"),$(this).html("<i class='fa fa-eye'></i>"))}),$(document).on("click",".cat-content .list-content-product li a",function(e){$(".cat-content .list-content-product li a").removeClass("active-ndsp"),$(this).addClass("active-ndsp")}),$(document).on("click",".btn-select-buy",function(e){$(window).width()>1200&&$("body,html").stop().animate({scrollTop:0},800);var t=$('input[name="_token"]').val(),n=$('input[name="qty_product"]').val(),i=$(".hrcart .number_cartmenu").text();i=Number(i)+Number(n),$(".hrcart .number_cartmenu").text(i);var a=$("#product_id").val(),s=$("#unit_id").val(),c=$("#user_sell").val(),o=$("#code_ref").val();url=$(this).data("href"),$.ajax({url:url,method:"POST",cache:!1,dataType:"html",data:{product_id:a,unit_id:s,quantity:n,user_sell:c,codeRef:o,_token:t},success:function(e){$(".dropdown-cart-info").html(e),$(".wp-cart-res").html(e),$(".dropdown-cart").css({opacity:1,visibility:"visible"}),1200>$(window).width()&&visible_cart_respon(),setTimeout(function(){$(".dropdown-cart-info .dropdown-cart").removeAttr("style")},3e3)}})}),$(document).on("click",".close-cart",function(e){$(".dropdown_cart").css("opacity",0),$(".dropdown_cart").css("visibility","hidden"),$(".black-res-screen").css("display","none"),$(".fix1screen").css("display","none")}),$(document).on("change","select.get_child",function(e){if(e.preventDefault(),url=$(this).data("href"),target=$(this).data("target"),""==($selectValue=$(this).val())&&""!=url&&-1!==url.indexOf("value_new"))options=$(target).find("option")[0].outerHTML,$(target).html(options),$(target).trigger("change");else{url=url.replace("value_new",$selectValue);let t=$(this).data("addtion");void 0!==t&&(t=t.split("|")).forEach(function(e,t){""!=(elemValue=$("#"+e).val())&&(-1===url.indexOf("?")?url+="?filter_"+e+"="+elemValue:url+="&filter_"+e+"="+elemValue)}),$.get({url:url,cache:!1,dataType:"json",success:function(e){options="",$(target+" option").length>0&&(options=$(target).find("option")[0].outerHTML),$.each(e,function(e,t){options+="<option value= '"+e+"'>"+t+"</option>"}),$(target).html(options),$(target).hasClass("get_data")&&$(target).trigger("change"),$(target).hasClass("get_child")&&$(target).trigger("change")},error:function(e,t,n){alert("Error: "+n)}})}}),$(document).on("change","select.get_data",function(e){e.preventDefault();let t=$(this).val();target=$(this).data("target");let n=$(this).data("href");n=n.replace("value_new",t);let i=$(this).data("addtion");void 0!==i&&(i=i.split("|")).forEach(function(e){elemValue=$("#"+e).val(),n+="&filter_"+e+"="+elemValue}),$.get({url:n,cache:!1,dataType:"html",success:function(e){$(target).html(e)},error:function(e,t,n){alert("Error: "+n)}})}),$(document).on("change","input.number-product",function(e){$value=$(this).val();var t=$('input[name="money_ship"]').val(),t=parseInt(t,10);(url=$(this).data("href"))&&(url=url.replace("value_new",$value),$current=$(this),$.post({url:url,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},cache:!1,dataType:"json",success:function(e){product_id=($parent=$($current).parents(".item-product")).data("id"),$($parent).find(".price").html(e.product[product_id].price.toLocaleString("vi-VN")),$($parent).find(".money").html(e.product[product_id].total_money.toLocaleString("vi-VN")),$parent.parents(".dropdown-cart").length>0&&$(".info-product-cart").length>0?$(".info-product-cart").find(".item-product[data-id="+product_id+"]").length>0&&($(".info-product-cart").find(".total_product").html(e.total_product),product=$(".info-product-cart").find(".item-product[data-id="+product_id+"]"),$(product).find(".price").html(e.product[product_id].price.toLocaleString("vi-VN")),$(product).find(".number-product").val($value),$(product).find(".money").html(e.product[product_id].total_money.toLocaleString("vi-VN"))):$(".info-product-cart").find(".total_product").html(e.total_product),$product=($seller=$(".dropdown-cart").find(".user-seller-"+e.user_sell)).find(".item-product-"+product_id),$old_qty=parseInt($product.find(".number-product").val()),$product.find(".number-product").val($value),$product.find(".money").html(e.product[product_id].total_money.toLocaleString("vi-VN")),$new_qty=parseInt($value),$total_product=parseInt($(".number_cartmenu").html()),$(".number_cartmenu").html($total_product-$old_qty+$new_qty),$("input[name=user_sell]").length>0&&$("input[name=user_sell]").val()==e.user_sell&&($(".col-right-cart").find(".total").html(e.total.toLocaleString("vi-VN")),$(".col-right-cart").find(".total_thanh_toan").html((e.total+t).toLocaleString("vi-VN")),$(".info-payment-ck").find(".total_thanh_toan").html((e.total+t).toLocaleString("vi-VN")))},error:function(e,t,n){alert("Error: "+n)}}))}),$(document).on("change","input[name='delivery_method']",function(e){e.preventDefault(),1==($value=$(this).val())?($(".rowPharmacy").removeClass("d-none"),$(".rowHome").addClass("d-none"),$("input[name='receive[address]']").addClass("ignore"),$("select[name='receive[province_id]']").addClass("ignore"),$("select[name='receive[ward_id]']").addClass("ignore"),$("select[name='receive[district_id]']").addClass("ignore")):($(".rowPharmacy").addClass("d-none"),$(".rowHome").removeClass("d-none"),$("input[name='receive[address]']").removeClass("ignore"),$("select[name='receive[province_id]']").removeClass("ignore"),$("select[name='receive[ward_id]']").removeClass("ignore"),$("select[name='receive[district_id]']").removeClass("ignore"))}),$(document).on("change","input[name='payment']",function(e){e.preventDefault(),1==($value=$(this).val())?$(".info-payment-ck").addClass("d-none"):$(".info-payment-ck").removeClass("d-none")}),$(document).on("change","#export_tax",function(e){e.preventDefault(),$value=$(this).val(),$(this).is(":checked")?($(".rowInovice").removeClass("d-none"),1==(valueObject=$("input[name='invoice[object]']:checked").val())?($("input[name='invoice[name]']").attr("placeholder","Nhập t\xean c\xf4ng ty"),$("input[name='invoice[phone]']").parents(".col-4").addClass("d-none"),$("input[name='invoice[tax_code]']").removeClass(".ignore"),$("input[name='invoice[phone]']").addClass(".ignore"),$("input[name='invoice[tax_code]']").parents(".col-4").removeClass("d-none")):($("input[name='invoice[tax_code]']").addClass(".ignore"),$("input[name='invoice[phone]']").removeClass(".ignore"),$("input[name='invoice[name]']").attr("placeholder","Nhập Họ t\xean"),$("input[name='invoice[tax_code]']").parents(".col-4").addClass("d-none"),$("input[name='invoice[phone]']").parents(".col-4").removeClass("d-none")),$("input[name='invoice[name]']").removeClass(".ignore"),$("input[name='invoice[address]']").removeClass(".ignore")):($("input[name='invoice[name]']").addClass(".ignore"),$("input[name='invoice[phone]']").addClass(".ignore"),$("input[name='invoice[tax_code]']").addClass(".ignore"),$("input[name='invoice[address]']").addClass(".ignore"),$(".rowInovice").addClass("d-none"))}),$(document).on("change","input[name='invoice[object]']",function(e){e.preventDefault(),1==($value=$(this).val())?($("input[name='invoice[name]']").attr("placeholder","Nhập t\xean c\xf4ng ty"),$("input[name='invoice[phone]']").parents(".col-4").addClass("d-none"),$("input[name='invoice[tax_code]']").parents(".col-4").removeClass("d-none"),$("input[name='invoice[tax_code]']").removeClass(".ignore"),$("input[name='invoice[phone]']").addClass(".ignore")):($("input[name='invoice[name]']").attr("placeholder","Nhập Họ t\xean"),$("input[name='invoice[tax_code]']").parents(".col-4").addClass("d-none"),$("input[name='invoice[phone]']").parents(".col-4").removeClass("d-none"),$("input[name='invoice[tax_code]']").addClass(".ignore"),$("input[name='invoice[phone]']").removeClass(".ignore"))}),$(document).on("click",".view-btn-add-product",function(e){var t=parseInt($(this).attr("data-offset")),n=$(this).attr("data-href"),i=$('input[name="_token"]').val(),a=$(this).attr("data-type"),s=$(this).attr("data-object"),c=$(this).attr("data-orderby"),o=$(this).attr("data-idcat"),r=$(this);parseInt($(this).find(".visibility-number-product").text().trim())-20<1&&$(".view-btn-add-product").hide();var l=$(this).closest(".box-filter-advanced").find('input[name="list_trademark[]"]:checked'),d=[];l.each(function(){d.push($(this).val())});var u=$(this).closest(".box-filter-advanced").find('input[name="list_country[]"]:checked'),p=[];u.each(function(){p.push($(this).val())}),$.ajax({url:n,cache:!1,method:"GET",dataType:"html",data:{offset:t,type:a,object:s,orderBy:c,idCat:o,listTrademarkId:d,listCountryId:p,_token:i},success:function(e){r.find(".visibility-number-product").text(function(e,t){return Math.max(parseInt(t)-20,0)}),t+=20,r.attr("data-offset",t),r.closest(".parent-btn-view-add").find("ul.ls_product-view-add").append(e)}})}),$(document).on("click",".btnFilterProductInHome",function(e){$(".slect-item-customer").removeClass("active-slect"),$(this).addClass("active-slect");var t=$(this).attr("data-object")||null;$(this).attr("data-type");var n=$(this).closest("#product-by-object");n.find(".view-btn-add-product").attr("data-object",t),n.find(".view-btn-add-product").attr("data-offset",10);var i=$(this).attr("data-href"),a=$('input[name="_token"]').val();$.ajax({url:i,cache:!1,method:"GET",dataType:"html",data:{object_product:t,_token:a},success:function(e){$("#product-by-object").html(e)}})}),$(document).on("click",".btnFilterProductInCat",function(e){$(".slect-item-customer").removeClass("active-slect"),$(this).addClass("active-slect");var t=$(this).closest("#wp-product-cat");t.find(".view-btn-add-product").attr("data-orderby",n),t.find(".view-btn-add-product").attr("data-offset",20),$(this).closest("#wp-product-cat"),$(".btnFilterProductInCat").attr("data-orderby",n);var n=$(this).attr("data-orderby")||null,i=$(this).attr("data-type")||null,a=$(this).attr("data-idcat")||null,s=$(this).attr("data-href"),c=$('input[name="_token"]').val(),o=$(this).closest(".box-filter-advanced").find('input[name="list_trademark[]"]:checked'),r=[];o.each(function(){r.push($(this).val())});var l=$(this).closest(".box-filter-advanced").find('input[name="list_country[]"]:checked'),d=[];l.each(function(){d.push($(this).val())}),$.ajax({url:s,cache:!1,method:"GET",dataType:"html",data:{orderby_product:n,type:i,idCat:a,listTrademarkId:r,listCountryId:d,_token:c},success:function(e){$("#body-nbox").html(e)}})}),$(document).on("click",".select-status-order",function(e){var t=$(this).attr("data-status"),n=$(this).attr("data-href"),i=$(this).attr("data-phone"),a=$('input[name="_token"]').val();$.ajax({url:n,cache:!1,method:"GET",dataType:"html",data:{status:t,phone:i,_token:a},success:function(e){$(".table-order-frontend").html(e)}})}),$(document).on("click",".view-detail-order",function(e){$(".wp-detail-order").css("display","block"),$(".black-screen").css("display","block");var t=$(this).attr("data-id"),n=$(this).attr("data-href"),i=$('input[name="_token"]').val();$.ajax({url:n,cache:!1,method:"GET",dataType:"html",data:{id:t,_token:i},success:function(e){$(".wp-detail-order").html(e)}})}),$(document).on("click",".btn-closenk",function(e){$(".wp-detail-order").css("display","none"),$(".black-screen").css("display","none"),$(".titlek").removeClass("fixed-hbd")}),$(document).on("click","#btn-searchorder",function(e){$(".ls-product-select li").length>0&&(listProduct=$(".ls-product-select").html(),$(".ls-product-select-prescrip").html(listProduct),$(".ls-product-select-prescrip").css("display","block"),$(".form-search-product").css("display","none"),$(".black-screen").css("display","none"),$("#container").removeClass("fixed-hbd"),$("#fixscreen-respon").css("display","none"),$(".title-list-select").text("T\xean thuốc đ\xe3 nhập:"),user_sell=$("#name-store").val(),$('input[name="user_sell"]').val(user_sell))}),$(document).on("click",".plus",function(){qty=parseInt($(this).parents(".input-group").find(".number-product").val())+1,$(this).parents(".input-group").find(".number-product").val(qty),$(this).parents(".input-group").find(".number-product").change()}),$(document).on("click",".minus",function(){1>=parseInt($(this).parents(".input-group").find(".number-product").val())?qty=1:(qty=parseInt($(this).parents(".input-group").find(".number-product").val())-1,$(this).parents(".input-group").find(".number-product").val(qty),$(this).parents(".input-group").find(".number-product").change())}),$(document).on("blur",".number-product",function(){var e=$(this).val().trim(),t=parseInt(e,10);""===e||isNaN(t)||t<1?$(this).val(1):t>999?$(this).val(999):$(this).val(t)}),$(document).on("click",".delele-item-in-cart",function(){url=$(this).data("href"),$.get({url:url,cache:!1,dataType:"html",success:function(e){window.location.reload()}})}),$(document).on("keyup",".search-product-keyup",function(e){var t=$(this).val();if(""==t||" "==t[0])$(".ls-product-search").html("<div class='mb-3 rimg-center'><img src='images/shop/pescrip5.png'></div>");else{var n=$(this).attr("data-href"),i=$('input[name="_token"]').val(),a=$("#name-store").val();$.ajax({url:n,cache:!1,method:"GET",dataType:"html",data:{keyword:t,user_sell:a,_token:i},success:function(e){$(".ls-product-search").html(e)}})}}),$(document).on("click",".btn-add-item",function(e){$(".ls-product-select").css("display","block");var t=$(this).attr("data-id");(rowCurrent=$(this).closest(".item-search")).remove(),temp=$(".ls-product-select li").length+1,nameProduct=rowCurrent.find(".name-product").text(),$(".title-list-select").text("T\xean thuốc đ\xe3 nhập: "),itemSelect="<li class='item-select'><div class='d-flex'><div class='wp-10 text-center number_select'>"+temp+"</div><div class='wp-70 text-left'>"+nameProduct+"</div><div class='wp-20  text-center'><div class='btn'><input type='hidden'  name='info_product["+t+"]' value='"+nameProduct+"'><span class='btn-remove'>X\xf3a</span></div></div></div></li>",$(".ls-product-select").append(itemSelect)}),$(".addy-product").click(function(){let e=$("#form-search-product").offset().top;$("HTML, BODY").animate({scrollTop:e},200),$(".form-search-product").css("display","block"),$(".black-screen").css("display","block"),$("#container").addClass("fixed-hbd")}),$(document).on("click",".ls-product-select .btn-remove",function(e){1==$(".ls-product-select li").length&&($(".title-list-select").text(""),$(".ls-product-select").css("display","none")),numLast=$(".ls-product-select li").length,(rowCurrent=$(this).closest(".item-select")).remove(),indexCurent=rowCurrent.find(".number_select").text(),listItemSelect=document.querySelectorAll(".ls-product-select li.item-select");for(let t=0;t<listItemSelect.length;t++)listItemSelect[t].querySelector(".number_select").innerText=t+1}),$(document).on("click",".ls-product-select-prescrip .btn-remove",function(e){1==$(".ls-product-select-prescrip li").length&&($(".title-list-select").text(""),$(".ls-product-select-prescrip").css("display","none")),numLast=$(".ls-product-select-prescrip li").length,(rowCurrent=$(this).closest(".item-select")).remove(),indexCurent=rowCurrent.find(".number_select").text(),listItemSelect=document.querySelectorAll(".ls-product-select-prescrip li.item-select");for(let t=0;t<listItemSelect.length;t++)listItemSelect[t].querySelector(".number_select").innerText=t+1}),$(document).on("click","#pills-no-prescrip",function(e){$(".form-buy .title-list-select").text(""),$(".ls-product-select-prescrip").html(" "),$(".ls-product-select-prescrip").css("display","none"),$(".number_product").addClass("ignore"),$('input[name="is_prescrip"]').val("")}),$(document).on("click","#pills-yes-prescrip",function(e){numLast=$(".ls-product-select-prescrip li").length,$(".number_product").removeClass("ignore")}),$(document).on("change","#name-store",function(e){$(".wp-content-shorder .title-list-select").text(""),$(".ls-product-select").html(" "),$(".ls-product-select").css("display","none")}),$(document).on("input",".fc-search-js input",function(e){var t=$(this),n=t.val().trim();if(n.length>0&&" "===n[0]&&(n=n.substring(1)),""==n){clearTimeout(typingTimer),$(".fa-spinner").hide();var i=t.closest(".wp-search-list-product");i.find(".list-product-short").html("<div class='px-4 py-2'><p>Bạn c\xf3 thể t\xecm kiếm theo t\xean hoặc c\xf4ng dụng thuốc</p></div>"),i.find(".clear-keyword").hide(),$(".wp-input-search-simple>input").val("");return}n.length>0&&$(".wp-input-search-simple>input").val(n),clearTimeout(typingTimer),clearTimeout(ajaxRequest),$(".fa-spinner").show();var i=t.closest(".wp-search-list-product");i.find(".clear-keyword").hide(),typingTimer=setTimeout(function(){var e=t.attr("data-href"),a=$('input[name="_token"]').val();ajaxRequest=setTimeout(function(){$.ajax({url:e,cache:!1,method:"GET",dataType:"html",data:{keyword:n,_token:a},success:function(e){i.find(".wp-list-product-short").html(e),$(".fa-spinner").hide(),i.find(".clear-keyword").show()},error:function(){$(".fa-spinner").hide(),i.find(".clear-keyword").show()}})},1e3)},250)}),$(document).on("click",".clear-keyword",function(){$(this).closest(".wp-search-list-product").find(".wp-input-search input").val("").focus(),$(this).hide()}),$(document).on("click",".form-search-scroll",function(e){let t=$("#form-search").offset().top;$("HTML, BODY").animate({scrollTop:t},500)}),$(document).on("click",".form-search-show-list",function(e){$(".lc-mask-search").css("opacity",1),$(".lc-mask-search").css("visibility","visible"),$(".ls-history").css("display","block")}),$(document).on("click",".search-header-mobi .wp-input-search-simple",function(e){$("#box-search-fixed").css("display","block");var t=$("#box-search-fixed .input-search-info")[0];if(t.focus(),"function"==typeof t.setSelectionRange)t.setSelectionRange(t.value.length,t.value.length);else if("function"==typeof t.createTextRange){var n=t.createTextRange();n.collapse(!1),n.select()}}),$(document).on("click",".icon-back-search",function(e){$("#box-search-fixed").css("display","none"),$(".lc-mask-search").css("opacity",0),$(".lc-mask-search").css("visibility","hidden")}),$(document).on("click",".lc-mask-search",function(e){$(".lc-mask-search").css("opacity",0),$(".lc-mask-search").css("visibility","hidden"),$(".ls-history").css("display","none")}),$(document).on("click",".delete-history-keyword",function(e){var t=$(this).attr("data-href"),n=$('input[name="_token"]').val();$.ajax({url:t,cache:!1,method:"GET",dataType:"html",data:{_token:n},success:function(e){$(".data-history").html(e)}})}),$(document).on("click",".wp-search .wp-input-search-simple>input",function(e){$(".black-screen").css("display","block"),$(".wp-list-product-short").css("display","block"),$(".wp-search-menu form").css("z-index",504);let t=$("#wp-search").offset().top;$("HTML, BODY").animate({scrollTop:t},0)}),$(document).on("click",".black-screen",function(e){$(".black-screen").css("display","none"),$(".wp-list-product-short").css("display","none"),$(".wp-search-menu form").css("z-index",502)}),$(document).on("keyup",".wp-search .wp-input-search-simple>input",function(e){var t=$(this).val();if(""==t||" "==t[0])$(".btn-search").attr("disabled","disabled"),$(".list-product-short").html("<div class='px-4 py-2'><p class='mb-3'>Bạn c\xf3 thể t\xecm kiếm theo t\xean hoặc c\xf4ng dụng thuốc</p><img loading='lazy' decoding='async' alt='Tdoctor' src='../../images/shop/skeleton-product.png'></div>");else{$(".btn-search").removeAttr("disabled");var n=$(this).attr("data-href"),i=$('input[name="_token"]').val();$.ajax({url:n,cache:!1,method:"GET",dataType:"html",data:{keyword:t,_token:i},success:function(e){$(".wp-list-product-short").html(e)}})}}),$(document).on("keyup",'input[name="buyer[phone]"]',function(e){var t=$(this).val();$(".phone-customer").text(t)}),$(document).on("click",".mdlh .md",function(e){$(".md").removeClass("active"),$(this).addClass("active"),$(".content-detail-product").toggleClass("fs-big")}),$(document).on("click",".no-login",function(e){alert("Vui l\xf2ng đăng nhập để gửi b\xecnh luận!")}),$(document).on("click",".submit-comment",function(e){var t=$(this).closest(".content-quest").find('textarea[name="content"]').val(),n=$(this).closest(".content-quest").find('input[name="fullname"]').val(),i=$(this).closest(".content-quest").find('input[name="phone"]').val(),a=void 0!==$(this).attr("data-rating")?$(this).attr("data-rating"):null;if(t.trim(),!a&&0===t.trim().length){alert("Vui l\xf2ng nhập nội dung b\xecnh luận!");return}for(var s=$(this).attr("data-url"),c=$(this).attr("data-product"),o=$(this).attr("data-shop"),r=$(this).attr("data-user"),l=$(this).attr("data-parentid"),d=$('input[name="_token"]').val(),u=$('input[name="albumImage[]"]')[0].files,p=new FormData,h=0;h<u.length;h++)p.append("albumImage[]",u[h]);p.append("_token",d),p.append("userId",r),p.append("productId",c),p.append("shopId",o),p.append("content",t),p.append("fullname",n),p.append("phone",i),p.append("parentid",l),p.append("rating",a),$.ajax({url:s,method:"POST",dataType:"html",data:p,processData:!1,contentType:!1,success:function(e){location.reload(),a&&null!==a?$(".content-rating-product").html(e):$(".content-comment-product").html(e)}})}),$(document).on("click",".repply-comment",function(e){var t=$(this).data("commenter-name"),n=$(this).data("comment-id"),i=$(this).data("rating");$("#replyModal").fadeIn(200),$("#replyModalLabel").text("Trả lời cho "+t),$("#replyModal .submit-comment").attr("data-parentid",n),$("#replyModal .submit-comment").attr("data-rating",i),$('#replyModal textarea[name="content"]').val("").focus()}),$(document).on("click","#starRating .star-big",function(e){var t=$(this).data("rating");$(this).closest(".rating").find(".star").each(function(e){e<t?$(this).addClass("active"):$(this).removeClass("active")}),$(this).closest(".modal-body").find(".submit-comment").attr("data-rating",t)}),$(document).on("mouseover","#starRating .star-big",function(e){var t=$(this).data("rating");$(this).closest(".rating").find(".star").each(function(e){e<t?$(this).addClass("active"):$(this).removeClass("active")}),$(this).closest(".modal-body").find(".submit-comment").attr("data-rating",t)}),$(".list-check-items").each(function(){var e=$(this).find(".check-all"),t=$(this).find(".sub-checkbox");e.change(function(){t.prop("checked",!1)}),t.change(function(){if($(this).prop("checked")){var n=!0;t.each(function(){if(!$(this).prop("checked"))return n=!1,!1}),e.prop("checked",n)}else e.prop("checked",!1)})}),function(e){var t=function(t){this.$element=e(t),this.$toggle=this.$element.find(".dropdown-toggle"),this.$menu=this.$element.find(".dropdown-menu"),this.init()};t.prototype.init=function(){var t=this;this.$toggle.on("click",function(e){e.preventDefault();window.getSelection().rangeCount,t.toggle()}),e(document).on("click",function(n){e(n.target).closest(t.$element).length||t.hide()})},t.prototype.toggle=function(){this.$menu.toggleClass("show"),this.$toggle.attr("aria-expanded",this.$menu.hasClass("show"))},t.prototype.hide=function(){this.$menu.hasClass("show")&&(this.$menu.removeClass("show"),this.$toggle.attr("aria-expanded","false"))},e.fn.dropdown=function(){return this.each(function(){new t(this)})},e(document).ready(function(){e(".dropdown").dropdown()})}(jQuery),$(document).on("click",".wp-link-affiliate .btn-copy-link",function(e){var t=$(this).siblings(".value-link"),n=$("<input>");$("body").append(n),n.val(t.text()).select(),document.execCommand("copy"),n.remove(),$("#copy-notification").fadeIn(200).delay(2e3).fadeOut(200)}),$(document).ready(function(){$(".icon-filter").on("click",function(){$("#modalFilter").fadeIn(200)}),$(".show-form-rating").on("click",function(){$("#ratingModal").fadeIn(200),$(".black-screen").css("display","block")}),$(".close").on("click",function(){$("#modalFilter").fadeOut(200),$("#replyModal").fadeOut(200),$("#ratingModal").fadeOut(200),$("#commentModal").fadeOut(200),$(".black-screen").css("display","none")}),$(".submit-comment").on("click",function(){$("#replyModal").fadeOut(200),$("#ratingModal").fadeOut(200),$("#commentModal").fadeOut(200),$(".black-screen").css("display","none")}),$(".btnFilterProductInCat").on("click",function(){$("#modalFilter").fadeOut(200)})}),$(document).on("click",".create-comment",function(e){$("#commentModal").fadeIn(200)}),$(document).on("click",".btnSelectUnitPriceProduct",function(e){$(".slect-item-customer").removeClass("active-slect"),$(this).addClass("active-slect");var t=$(this).attr("data-priceFormat")||null,n=$(this).attr("data-unitId")||1;$("#show-price-buy-product").text(t),$("#unit_id").val(n)}),$(document).ready(function(){$(".item .gallery img").on("mousemove",function(e){var t=$(this),n=$(".zoom-lens"),i=t.offset(),a=t.width(),s=t.height(),c=e.pageX-i.left,o=e.pageY-i.top,r=c-n.width()/2,l=o-n.height()/2;n.css({left:r,top:l}),t.addClass("zoomed"),t.css({"transform-origin":`${c/a*100}% ${o/s*100}%`}),n.addClass("active")}),$(".item .gallery img").on("mouseleave",function(){$(this).removeClass("zoomed"),$(this).css("transform-origin","center center"),$(".zoom-lens").removeClass("active")})});
$(document).ready(function() {
    $('.item-ncc-km').click(function() {
        $('.item-ncc-km').removeClass('active'); 
        $(this).addClass('active'); 
        var url = $(this).attr("data-href");
        var slug = $(this).attr("data-slug");
        var _token = $('input[name="_token"]').val();
        $.ajax({
            url: url,
            cache: false,
            method: "GET",
            dataType: 'html',
            data: {
                slug: slug,
                _token: _token
            },
            success: function (data) {
                $('#product-ncc-km').html(data);
            },
        });
    });
});